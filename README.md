## How a 40-Hour Week is Spent and Rewarded for the Modern Slavery

### [Demo](https://easz.github.io/40hSlavery/charts/)

By visualization of

  - [Perforce](https://www.perforce.com/) commit history
  - [Procrastitracker](https://github.com/aardappel/procrastitracker) automatic time tracking on Windows
    - Forked one with [Javascript tool](https://github.com/easz/procrastitracker/tree/master/tools/js)
  - and etc.

## How to

#### Generate Your Own Charts (./charts)

  - adapt public configuration **config.json**
    - **data**
      - **commit_info_csv** and **commit_files_json** point to the files generated by the tool ***perforce_commit_metrics.py***
      - **time_tracking_pt** points to the Procrastitracker PT database
      - **monetary_csv** points to a CSV data defining reward
    - **info** for simple personal info
    - **options** for various chart options
  - Or create a private configuration **private.config.json** which will be loaded instead of the config.json
    - **private.config.json** will not be tracked by git be default
    - Any folder named **private** will also not be tracked by git by default
  - open **index.html** with browser (local development)
    - Firefox works and is tested.
    - IE or Chrome browser may not work withour extra configuration due to local file access security policy.
    - Or run a local HTTP server to serve: See https://github.com/d3/d3/wiki#local-development


#### Use Tools to Collect Data (./tools)

  - **perforce_commit_metrics.py**
    - collect all perforce commits made by a user within a time span
      - $ perforce_commit_metrics.py -u max.mustermann -f @2017/01/01 -t @2017/12/31 -o output
    - generate output
      - *output*.csv: all perforce changelists with information about affected files (add, delete, edit) and lines (add, delete, change)
      - *output*.files.json: all committed file paths with affected revision numbers
  - **p4metrics.files.merge.py**
    - merge files generated by perforce_commit_metrics.py
      - $ p4metrics.files.merge.py -t json *.json
  - **p4metrics.files.anonymize.py**
     - anonymize the *output*.files.json generated by perforce_commit_metrics.py

